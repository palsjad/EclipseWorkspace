package com.wbl.WalmartSearchApi;

import java.io.IOException;

import org.apache.commons.io.IOUtils;
import org.apache.http.HttpResponse;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.testng.Assert;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

public class searchItemTest {
	
	
	HttpResponse response;
	searchItem wsi; 
	
	
	@BeforeClass
	public void before() {
		
		wsi =  new searchItem();
	 	
	}
	
	
	@Test
	public void itemTest() throws JSONException, IllegalStateException, IOException {
		
		response = wsi.getMethod();
		
		 
			
			JSONObject obj = new JSONObject(IOUtils.toString(response.getEntity().getContent()));
			
		 
		
		System.out.println(response.getStatusLine().getStatusCode());

		Assert.assertEquals(response.getStatusLine().getStatusCode(), 200);
		
		
	/*
 		
		query": "ipod",
	    "sort": "relevance",
	    "responseGroup": "base",
	    "totalResults": 21298,
	    "start": 1,
	    "numItems": 10,
		*/
	   System.out.println( obj.get("totalResults"));
	   System.out.println( obj.get("sort"));
	   System.out.println( obj.get("responseGroup"));
	   System.out.println( obj.get("start"));
	   System.out.println( obj.get("numItems"));
	    
	 
	   JSONArray arr =  obj.getJSONArray("items");
	   
	   
	   
	   System.out.println( arr.get(0) );
	   System.out.println( arr.get(1));

		
	}

}
