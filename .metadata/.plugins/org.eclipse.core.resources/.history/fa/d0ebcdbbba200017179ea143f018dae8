package com.wbl.test;

 import org.testng.Assert;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import com.wbl.base.BaseTest;
import com.wbl.helper.ExcelHelper;
import com.wbl.page.AmazonHomePage;
import com.wbl.page.AmazonLoginPage;

public class AmazonHomePageTest extends BaseTest{

//	WebDriver driver;   // do not have it here as it reinitializes the webdriver 
                        // 	and we get a null pointer excepton as its already initializedin the base class
	
	
	AmazonHomePage ahp;
	
	AmazonLoginPage alp;
	
	Object data[][] = null;

	

	@BeforeClass
	public void before() {
		
		System.out.println("inside test before");
		
 		ahp = new AmazonHomePage(driver);

//		ahp.getHomePage();
 		
		
	}
	

 
 
 
 	@DataProvider(name="accountList")
	public Object[][] accountListData(){
		
		System.out.println("home page data = reading excel");

		  data = ExcelHelper.getExcelData("test-data\\HomePageTestData.xlsx","AccountListDropDown");
		
		return data;
		
	}
 	
 	
	@DataProvider(name="navigateDeptDropDown")
	public Object[][] deptDropDownData(){
		
		System.out.println("home page data = reading excel");

		  data = ExcelHelper.getExcelData("test-data\\HomePageTestData.xlsx","navigateDeptDropDown");
		
		return data;
		
	}
	
	
	@Test
	public void tryPrimeTest() {
		
	//	Assert.assertEquals(ahp.tryPrime(),"Amazon Prime");
		
		Assert.assertEquals(ahp.tryPrime(),new AmazonLoginPage(driver));
	}
	 
	
	 @Test
	 public void getSignInTest() {
		 

	   Assert.assertNotNull(ahp.getSignInPage());
     
 //  Assert.assertEquals(ahp.createAccountPage(),"Amazon Registration");

	 }



	 @Test
	 public void createAccountPageTest() {
	 
 
	  Assert.assertNotNull(ahp.createAccountPage());

	 
 	 }

	 
	
 @Test
 public void getDeptDropDownCountTest() {
	 
	 int result = ahp.getDeptDropDownCount();
	 
	 System.out.println("the count is : " + result);
	 
	 // count is 21

	 Assert.assertEquals(ahp.getDeptDropDownCount(), 21);
 }
 
 
 @Test(dataProvider="navigateDeptDropDown")
 public void navigateDeptDropDownTest(String first, String second, String expected) {
	 
	 String title = ahp.navigateDeptDropDown(first, second);
	 
	 Assert.assertEquals(title,"Amazon.com: Children's Books, Kids Books, Stories for Kids" );
			 
	//title is = Amazon.com: Children's Books, Kids Books, Stories for Kids 
	 
 }
 
 @Test(dataProvider="accountList") 
 public void getAccountDetailsTest(String choice, String number, String expected) {
	 
	 Assert.assertEquals(ahp.getAccountDetails(number),"Amazon Sign In");
	 
 	 
	 //title is = Amazon Sign In

 }
	

}
